<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BharatComfort - Listings</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="css/style.css">
  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
  <script src="js/firebase-config.js"></script>
</head>
<body>
  <header class="header">
    <div class="wrap">
      <div class="brand">
        <div class="logo">BC</div>
        <div><div style="font-weight:700">BharatComfort</div><small class="muted">Listings</small></div>
      </div>
    </div>
  </header>

  <main class="wrap" style="padding:14px">
    <div class="searchbar">
      <input id="q" type="text" placeholder="Search city, hotel, restaurant" style="flex:1"/>
      <select id="cityFilter"><option value="">All Cities</option></select>
      <select id="typeFilter"><option value="">All Types</option><option value="hotel">Hotel</option><option value="restaurant">Restaurant</option></select>
      <button class="btn" id="searchBtn">Search</button>
    </div>

    <div class="grid" style="margin-top:12px">
      <aside class="filters-panel">
        <h4>Filters</h4>
        <label class="small">Min Price (INR)</label>
        <input id="minPrice" type="number" placeholder="0" />
        <label class="small" style="margin-top:8px">Max Price (INR)</label>
        <input id="maxPrice" type="number" placeholder="0" />
        <div style="margin-top:10px">
          <button class="btn" id="applyFiltersBtn">Apply Filters</button>
          <button class="button" id="clearFiltersBtn" style="margin-left:8px">Clear</button>
        </div>
      </aside>

      <section>
        <div id="resultsHeader" style="margin-bottom:10px">
          <strong id="resultCount">0</strong> <span class="muted">results</span>
          <div style="float:right">
            <select id="currencySelect"><option>INR</option><option>USD</option></select>
            <button id="toggleMapBtn" class="button">Show Map</button>
          </div>
        </div>

        <div id="cards" class="cards"></div>
        <div id="pagination" style="margin-top:16px;text-align:center"></div>

        <div id="mapWrap" style="display:none;margin-top:14px">
          <div class="map" id="map"></div>
        </div>
      </section>
    </div>
  </main>

  <footer>
   <!-- Chatbot Widget -->
<div id="chatbotContainer">
    <div id="chatHeader">Chat with BharatComfort</div>
    <div id="chatBody"></div>
    <input type="text" id="chatInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>
</div>

<style>
#chatbotContainer {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 300px;
    height: 400px;
    background: #fff;
    border: 1px solid #ccc;
    display: flex;
    flex-direction: column;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    z-index: 1000;
}
#chatHeader {
    background: #007bff;
    color: #fff;
    padding: 10px;
    text-align: center;
}
#chatBody {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
}
#chatInput {
    border-top: 1px solid #ccc;
    padding: 10px;
    width: calc(100% - 60px);
}
#chatbotContainer button {
    width: 50px;
}
</style>

    <div class="wrap">Â© 2025 BharatComfort</div>
  </footer>

  <!-- Maps & scripts -->
  <script>
    // lazy-load maps when toggled
    function loadMapsScript(callback){
      if(window.google && window.google.maps){ return callback(); }
      const s=document.createElement('script');
      s.src = "https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY";
      s.onload = callback;
      document.head.appendChild(s);
    }
  </script>

  <script src="js/i18n.js"></script>
  <script src="js/currency.js"></script>
  <script src="js/listings.js"></script>
  <script src="js/chatbot.js"></script>
  <script>applyLanguage('en');</script>
</body>
</html>
